{"./":{"url":"./","title":"Introduction","keywords":"","body":"Hi there ðŸ‘‹ ðŸ”­ My name is Jane, an undergraduate student from the National University of Defense Technology. ðŸ‘€ My research interest includes Managed Runtime, Compiler, MLSys, and Large Language Models (LLM). ðŸ“« How to reach me: zexinjian@gmail.com "},"MLSys/GPUManagement/":{"url":"MLSys/GPUManagement/","title":"GPU Management","keywords":"","body":"GPU Management "},"MLSys/MLServing/":{"url":"MLSys/MLServing/","title":"MLServing","keywords":"","body":"MLServing SOSP24 - PowerInfer: Fast Large Language Model Serving with a Consumer-grade GPU "},"MLSys/MLServing/sosp24-PowerInfer.html":{"url":"MLSys/MLServing/sosp24-PowerInfer.html","title":"SOSP24 - PowerInfer","keywords":"","body":"sosp24-PowerInfer PowerInfer: Fast Large Language Model Serving with a Consumer-grade GPU 1. èƒŒæ™¯ å¤§è¯­è¨€æ¨¡åž‹å› å…¶æ™ºåŠ›æ°´å¹³è¶Šæ¥è¶Šé«˜è€Œå¤‡å—å…³æ³¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»£ç ç”Ÿæˆã€AI Agentç­‰é¢†åŸŸå¾—åˆ°è¶Šæ¥è¶Šå¤šçš„åº”ç”¨ã€‚ç„¶è€Œï¼ŒLLMsç”±äºŽå…¶è¾ƒå¤§çš„å‚æ•°é‡ç›®å‰ä¸»è¦éƒ¨ç½²åœ¨é…å¤‡æœ‰é«˜ç«¯ä¸“ç”¨GPUæœåŠ¡å™¨çš„æ•°æ®ä¸­å¿ƒä¸­ã€‚å¦ä¸€æ–¹é¢ï¼Œç”±äºŽæ•°æ®éšç§ã€é™ä½ŽæŽ¨ç†æˆæœ¬ç­‰éœ€æ±‚çš„æŽ¨åŠ¨ï¼Œåœ¨æœ¬åœ°å¹³å°ä¸Šéƒ¨ç½²LLMsçš„è¶‹åŠ¿æ­£åœ¨å…´èµ·ï¼Œç‰¹åˆ«æ˜¯åœ¨é…å¤‡æ¶ˆè´¹çº§GPUçš„ä¸ªäººç”µè„‘ä¸Šã€‚ 2. é—®é¢˜ åœ¨æ¶ˆè´¹çº§GPUä¸Šéƒ¨ç½²LLMsé¢ä¸´ç€å·¨å¤§æŒ‘æˆ˜ï¼Œè¿™ä¸»è¦æ˜¯ç”±äºŽå…¶åºžå¤§çš„æ˜¾å­˜éœ€æ±‚ã€‚å½“æ¨¡åž‹å‚æ•°å¯¹æ˜¾å­˜çš„éœ€æ±‚è¶…å‡ºGPUæ˜¾å­˜æ—¶ï¼ŒçŽ°æœ‰çš„å‚æ•°å¸è½½æ–¹æ³•éƒ½ä¼šå¼•å…¥æ˜¾è‘—çš„é€Ÿåº¦ä¸‹é™é—®é¢˜ã€‚æœ¬æ–‡è®¤ä¸ºLLMæŽ¨ç†ä¸­å†…å­˜é—®é¢˜çš„å…³é”®åŽŸå› æ˜¯ç¡¬ä»¶æž¶æž„ä¸ŽLLMæŽ¨ç†ç‰¹æ€§ä¹‹é—´çš„å±€éƒ¨æ€§ä¸åŒ¹é…ã€‚å½“å‰çš„ç¡¬ä»¶æž¶æž„è®¾è®¡äº†ä¸€ä¸ªé’ˆå¯¹æ•°æ®å±€éƒ¨æ€§ä¼˜åŒ–çš„å†…å­˜å±‚æ¬¡ç»“æž„ã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå°çš„ã€é¢‘ç¹è®¿é—®çš„å·¥ä½œé›†åº”è¯¥å­˜å‚¨åœ¨GPUä¸­ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œæ›´å¤§çš„ã€è®¿é—®é¢‘çŽ‡è¾ƒä½Žçš„æ•°æ®æ›´é€‚åˆå­˜å‚¨åœ¨CPUä¸­ã€‚ç„¶è€Œï¼Œæ¯æ¬¡LLMæŽ¨ç†è¿­ä»£éƒ½éœ€è¦è®¿é—®æ•´ä¸ªå‚æ•°é›†ï¼Œå…¶æ€»å¤§å°å¤ªå¤§è€Œæ— æ³•è£…å…¥å•ä¸ªGPUï¼Œå› æ­¤æ²¡æœ‰è¡¨çŽ°å‡ºä»»ä½•å±€éƒ¨æ€§ï¼Œä»Žè€Œé˜»ç¢äº†é«˜æ•ˆçš„å±€éƒ¨æ€§åˆ©ç”¨ã€‚ 3. è§‚å¯Ÿ LLMä¸­çš„ç¥žç»å…ƒæ¿€æ´»éµå¾ªå¹‚å¾‹åˆ†å¸ƒï¼šä¸€å°éƒ¨åˆ†ç¥žç»å…ƒåœ¨å„ç§è¾“å…¥ä¸­æŒç»­è´¡çŒ®äº†å¤§éƒ¨åˆ†æ¿€æ´» (è¶…è¿‡80%ï¼Œçƒ­æ¿€æ´»)ï¼Œè€Œå¤§éƒ¨åˆ†ç¥žç»å…ƒå‚ä¸Žå‰©ä½™çš„æ¿€æ´»ï¼Œè¿™äº›æ¿€æ´»æ˜¯åœ¨è¿è¡Œæ—¶æ ¹æ®è¾“å…¥ç¡®å®šçš„ (å†·æ¿€æ´»)ã€‚è¿™ä¸€è§‚å¯Ÿè¡¨æ˜ŽLLMsåœ¨é«˜æ¿€æ´»ç¨€ç–æ€§ä¸­å­˜åœ¨å›ºæœ‰çš„æ¿€æ´»å±€éƒ¨æ€§ï¼Œå¯ä»¥ç”¨æ¥è§£å†³å‰é¢æåˆ°çš„å±€éƒ¨æ€§ä¸åŒ¹é…é—®é¢˜ã€‚ 4. è®¾è®¡ åŸºäºŽè¿™ç§å±€éƒ¨æ€§è§‚å¯Ÿï¼Œæœ¬æ–‡æŽ¨å‡ºPowerInferã€‚å…¶æ ¸å¿ƒç†å¿µæ˜¯é€šè¿‡å°†å°‘é‡çƒ­ç¥žç»å…ƒåˆ†é…ç»™GPUï¼Œè€Œå°†æž„æˆå¤§å¤šæ•°çš„å†·ç¥žç»å…ƒç”±CPUç®¡ç†ï¼Œæ¥åˆ©ç”¨LLMæŽ¨ç†ä¸­çš„å±€éƒ¨æ€§ã€‚å…·ä½“æ¥è¯´ï¼ŒPowerInferé€šè¿‡ä¸¤æ­¥è¿‡ç¨‹æ¥åˆ©ç”¨LLMæŽ¨ç†ä¸­çš„å±€éƒ¨æ€§ï¼š åœ¨ç¦»çº¿é˜¶æ®µï¼ŒPowerInferåŸºäºŽç¥žç»å…ƒçš„ç»Ÿè®¡æ¿€æ´»é¢‘çŽ‡é¢„å…ˆåˆ†ç±»å‡ºçƒ­ç¥žç»å…ƒå’Œå†·ç¥žç»å…ƒï¼Œå¹¶å°†å®ƒä»¬åˆ†åˆ«é¢„åŠ è½½åˆ°GPUå’ŒCPUä¸Šã€‚ åœ¨è¿è¡Œæ—¶ï¼Œå®ƒä½¿ç”¨åœ¨çº¿é¢„æµ‹å™¨æ¥è¯†åˆ«å¯¹äºŽæ¯ä¸ªç‰¹å®šè¾“å…¥å¯èƒ½è¢«æ¿€æ´»çš„ç¥žç»å…ƒã€‚è¿™ç§æ–¹æ³•å…è®¸GPUå’ŒCPUç‹¬ç«‹å¤„ç†å®ƒä»¬å„è‡ªçš„æ¿€æ´»çš„ç¥žç»å…ƒï¼Œä»Žè€Œæœ€å°åŒ–PCIeæ•°æ®ä¼ è¾“ã€‚ 5. æµ‹è¯• å®žéªŒç»“æžœè¡¨æ˜Žï¼ŒPowerInferèƒ½å¤Ÿå®žçŽ°å¹³å‡7.23å€çš„åŠ é€Ÿæ¯”ï¼Œæœ€é«˜è¾¾11.69å€çš„åŠ é€Ÿã€‚è¿™ä¸»è¦å–å†³äºŽPowerInferèƒ½å¤Ÿè®©è¶…è¿‡80%çš„è®¡ç®—ç”±GPUæ¥æ‰¿æ‹…ï¼Œæ˜¾è‘—åœ°ç¼“è§£äº†å±€éƒ¨æ€§ä¸åŒ¹é…çš„é—®é¢˜ã€‚ 6. Q&A Q1: è¿™ç§æ¨¡åž‹çš„ç¨€ç–æ€§éœ€è¦finetuneæ¨¡åž‹å—ï¼Ÿ A1: æœ‰äº›æ¨¡åž‹å¤©ç„¶å­˜åœ¨è¿™æ ·çš„ç¨€ç–æ€§ï¼Œä¾‹å¦‚OPTï¼ŒNVIDIAæŽ¨å‡ºçš„Minitronï¼›æœ‰äº›æ¨¡åž‹åˆ™éœ€è¦è¿›è¡Œfinetuneä»¥æ¿€å‘å…¶ç¨€ç–æ€§ã€‚ Q2: çƒ­ç¥žç»å…ƒæ˜¯åªæœ‰ä¸€å±‚æœ‰çš„è¿˜æ˜¯æ‰€æœ‰å±‚éƒ½å­˜åœ¨ï¼Ÿ A2: ç¥žç»å…ƒçš„å†·çƒ­æ€§åœ¨æ•´ä¸ªæ¨¡åž‹ä¸­å­˜åœ¨ï¼Œå¹¶ä¸å±€é™äºŽä¸€å±‚ã€‚ "},"LLM/":{"url":"LLM/","title":"LLM","keywords":"","body":"LLM LLM Foundations NeurIPS17 - Attention is All You Need "},"LLM/LLMModels.html":{"url":"LLM/LLMModels.html","title":"LLM Foundations","keywords":"","body":"1. ä»€ä¹ˆæ˜¯Base/Chat/Instruct/4Bitæ¨¡åž‹ å¤§æ¨¡åž‹åº“ä¸­çš„Baseã€Chatã€Instructå’Œ4Bité€šå¸¸æŒ‡çš„æ˜¯ä¸åŒç±»åž‹æˆ–é…ç½®çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡åž‹ã€‚å®ƒä»¬çš„åŒºåˆ«ä¸»è¦åœ¨äºŽè®­ç»ƒç›®æ ‡ã€ç”¨é€”å’Œæ¨¡åž‹å‚æ•°çš„ç²¾åº¦ã€‚ Baseæ¨¡åž‹ (base) å®šä¹‰ï¼šBaseæ¨¡åž‹é€šå¸¸æ˜¯æŒ‡æœªç»ç‰¹å®šä»»åŠ¡å¾®è°ƒçš„åŸºç¡€é¢„è®­ç»ƒæ¨¡åž‹ï¼Œåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æœ€åˆè¢«å¼€å‘å’Œä¼˜åŒ–çš„ï¼Œå®ƒæ—¨åœ¨å¹³è¡¡æ€§èƒ½å’Œèµ„æºæ¶ˆè€—ï¼› ç”¨é€”ï¼šè¿™äº›æ¨¡åž‹é€šå¸¸ç”¨äºŽè¿›ä¸€æ­¥çš„å¾®è°ƒï¼Œä»¥é€‚åº”ç‰¹å®šä»»åŠ¡æˆ–åº”ç”¨åœºæ™¯ã€‚å¦‚ï¼šæ™ºèƒ½å¯¹è¯ã€æ–‡æœ¬å†…å®¹ç”Ÿæˆç­‰ï¼› ç‰¹ç‚¹ï¼šå®ƒä»¬åŒ…å«äº†å¤§é‡é€šç”¨çŸ¥è¯†ï¼Œä½†æ²¡æœ‰é’ˆå¯¹ç‰¹å®šä»»åŠ¡è¿›è¡Œä¼˜åŒ–ã€‚ Chatæ¨¡åž‹ (chat) å®šä¹‰ï¼šChatæ¨¡åž‹ä¸“é—¨ä¸ºå¯¹è¯ç³»ç»Ÿ (èŠå¤©æœºå™¨äºº)è®¾è®¡å’Œä¼˜åŒ–ï¼› ç”¨é€”ï¼šç”¨äºŽç”Ÿæˆè‡ªç„¶è¯­è¨€å¯¹è¯ï¼Œèƒ½å¤Ÿç†è§£ä¸Šä¸‹æ–‡å¹¶ç”Ÿæˆè¿žè´¯ä¸”æœ‰æ„ä¹‰çš„å›žå¤ã€‚å¦‚ï¼šèŠå¤©æœºå™¨äººã€æ™ºèƒ½åŠ©åŠ›ï¼› ç‰¹ç‚¹ï¼šé€šå¸¸ç»è¿‡å¤§é‡å¯¹è¯æ•°æ®å¾®è°ƒï¼Œå…·å¤‡æ›´å¥½çš„ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›å’Œå¯¹è¯ç”Ÿæˆèƒ½åŠ›ã€‚ Instructæ¨¡åž‹ (instruct) å®šä¹‰ï¼šInstructæ¨¡åž‹æ˜¯ä¸ºéµå¾ªæŒ‡ä»¤æˆ–å®Œæˆç‰¹å®šä»»åŠ¡è€Œè®¾è®¡å’Œä¼˜åŒ–çš„æ¨¡åž‹ï¼› ç”¨é€”ï¼šç”¨äºŽæ‰§è¡Œå…·ä½“æŒ‡ä»¤ï¼Œå¦‚å›žç­”é—®é¢˜ã€ç”Ÿæˆæ–‡æœ¬ã€ç¿»è¯‘ç­‰ä»»åŠ¡ï¼› ç‰¹ç‚¹ï¼šç»è¿‡æŒ‡ä»¤æ•°æ®é›†å¾®è°ƒï¼Œèƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å’Œæ‰§è¡Œç”¨æˆ·æä¾›çš„æŒ‡ä»¤ã€‚ 4-Bitæ¨¡åž‹ (4bit) å®šä¹‰ï¼š4-Bitæ¨¡åž‹ä½¿ç”¨ä½Žç²¾åº¦ (4ä½)è¿›è¡Œé‡åŒ–ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨å’Œè®¡ç®—èµ„æºéœ€æ±‚ï¼› ç”¨é€”ï¼šé€‚ç”¨äºŽèµ„æºå—é™çš„çŽ¯å¢ƒï¼Œå¦‚ç§»åŠ¨è®¾å¤‡æˆ–åµŒå…¥å¼ç³»ç»Ÿï¼ŒåŒæ—¶ä¿æŒè¾ƒé«˜çš„æ€§èƒ½è¡¨çŽ°ï¼› ç‰¹ç‚¹ï¼šé€šè¿‡é‡åŒ–æŠ€æœ¯æ˜¾è‘—å‡å°‘äº†æ¨¡åž‹å¤§å°å’Œè®¡ç®—å¤æ‚åº¦ï¼Œä½†å¯èƒ½ä¼šç‰ºç‰²éƒ¨åˆ†ç²¾åº¦ã€‚ "},"LLM/neurips17-Transformer.html":{"url":"LLM/neurips17-Transformer.html","title":"NeurIPS17 - Transformer","keywords":"","body":"neurips17 - Transformer Attention is All You Need 1. å¼•è¨€ Transformeræ¨¡åž‹çš„å…¶ä¸­ä¸€ä¸ªä¼˜ç‚¹ï¼Œå°±æ˜¯ä½¿å¾—æ¨¡åž‹è®­ç»ƒè¿‡ç¨‹èƒ½å¤Ÿå¹¶è¡Œè®¡ç®—ã€‚åœ¨RNNä¸­ï¼Œæ¯ä¸€ä¸ªtime stepçš„è®¡ç®—éƒ½ä¾èµ–äºŽä¸Šä¸€ä¸ªtime stepçš„è¾“å‡ºï¼Œè¿™å°±ä½¿å¾—æ‰€æœ‰çš„time stepå¿…é¡»ä¸²è¡ŒåŒ–ï¼Œæ— æ³•å¹¶è¡Œè®¡ç®—ï¼›è€Œåœ¨Transformerä¸­ï¼Œæ‰€æœ‰time stepçš„æ•°æ®ï¼Œéƒ½æ˜¯ç»è¿‡Self Attentionè®¡ç®—ï¼Œä½¿å¾—æ•´ä¸ªè¿ç®—è¿‡ç¨‹å¯ä»¥å¹¶è¡ŒåŒ–è®¡ç®—ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š Transformerä½¿ç”¨äº†Seq2Seqä»»åŠ¡ä¸­å¸¸ç”¨çš„ç»“æž„ -- åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šEncoderå’ŒDecoderï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 2. ä»Žæ•´ä½“å®è§‚æ¥ç†è§£Transformer é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ•´ä¸ªæ¨¡åž‹è§†ä¸ºé»‘ç›’ã€‚åœ¨æœºå™¨ç¿»è¯‘ä»»åŠ¡ä¸­ï¼ŒæŽ¥æ”¶ä¸€ç§è¯­è¨€çš„å¥å­ä½œä¸ºè¾“å…¥ï¼Œç„¶åŽå°†å…¶ç¿»è¯‘æˆå…¶ä»–è¯­è¨€è¾“å‡ºã€‚ ä¸­é—´éƒ¨åˆ†çš„Transformerå¯ä»¥æ‹†åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå·¦è¾¹æ˜¯ç¼–ç éƒ¨åˆ† (encoding component)ï¼Œå³è¾¹æ˜¯è§£ç éƒ¨åˆ† (decoding component)ã€‚ å…¶ä¸­ç¼–ç éƒ¨åˆ†æ˜¯å¤šå±‚çš„ç¼–ç å™¨ (Encoder)ç»„æˆ (Transformerçš„è®ºæ–‡ä¸­ä½¿ç”¨äº†6å±‚ç¼–ç å™¨ï¼Œè¿™é‡Œçš„å±‚æ•°6å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œä¹Ÿå¯ä»¥æ ¹æ®å®žéªŒæ•ˆæžœæ¥ä¿®æ”¹å±‚æ•°)ã€‚åŒç†ï¼Œè§£ç éƒ¨åˆ†ä¹Ÿæ˜¯ç”±å¤šå±‚çš„è§£ç å™¨ (Decoder)ç»„æˆ (è®ºæ–‡é‡Œä¹Ÿä½¿ç”¨äº†6å±‚çš„è§£ç å™¨)ã€‚ æ¯ä¸€ä¸ªç¼–ç å™¨åœ¨ç»“æž„ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œä½†å®ƒä»¬çš„æƒé‡å‚æ•°æ˜¯ä¸åŒçš„ã€‚æ¯ä¸€ä¸ªç¼–ç å™¨é‡Œé¢ï¼Œå¯ä»¥åˆ†ä¸º2å±‚ï¼š Self-Attention Layer Feed Forward Neural Network (å‰é¦ˆç¥žç»ç½‘ç»œï¼Œç¼©å†™ä¸ºFFNN) è¾“å…¥ç¼–ç å™¨çš„æ–‡æœ¬æ•°æ®ï¼Œé¦–å…ˆä¼šç»è¿‡ä¸€ä¸ªSelf Attentionå±‚ï¼Œè¿™ä¸ªå±‚åœ¨å¤„ç†ä¸€ä¸ªè¯çš„æ—¶å€™ï¼Œä¸ä»…ä¼šä½¿ç”¨è¿™ä¸ªè¯æœ¬èº«çš„ä¿¡æ¯ï¼Œä¹Ÿä¼šä½¿ç”¨å¥å­ä¸­å…¶ä»–è¯çš„ä¿¡æ¯ã€‚æŽ¥ä¸‹æ¥ï¼ŒSelf Attentionå±‚çš„è¾“å‡ºä¼šç»è¿‡å‰é¦ˆç¥žç»ç½‘ç»œã€‚åŒç†ï¼Œè§£ç å™¨ä¹Ÿæœ‰è¿™ä¸¤å±‚ï¼Œä½†æ˜¯è¿™ä¸¤å±‚ä¸­é—´è¿˜æ’å…¥äº†ä¸€ä¸ªEncoder-Decoder Attentionå±‚ï¼Œè¿™ä¸ªå±‚èƒ½å¸®åŠ©è§£ç å™¨èšç„¦äºŽè¾“å…¥å¥å­çš„ç›¸å…³éƒ¨åˆ†ã€‚ 3. ä»Žç»†èŠ‚æ¥ç†è§£Transformer 3.1 Transformerçš„è¾“å…¥ å’Œé€šå¸¸çš„NLPä»»åŠ¡ä¸€æ ·ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šä½¿ç”¨è¯åµŒå…¥ç®—æ³• (embedding algorithm)ï¼Œå°†æ¯ä¸ªè¯è½¬æ¢ä¸ºä¸€ä¸ªè¯å‘é‡ã€‚å®žé™…ä¸­å‘é‡ä¸€èˆ¬æ˜¯256æˆ–è€…512ç»´ã€‚ä¸ºäº†ç®€åŒ–èµ·è§ï¼Œè¿™é‡Œå°†æ¯ä¸ªè¯çš„è½¬æ¢ä¸ºä¸€ä¸ª4ç»´çš„è¯å‘é‡ã€‚ é‚£ä¹ˆæ•´ä¸ªè¾“å…¥çš„å¥å­æ˜¯ä¸€ä¸ªå‘é‡åˆ—è¡¨ï¼Œå…¶ä¸­æœ‰3ä¸ªè¯å‘é‡ã€‚åœ¨å®žé™…ä¸­ï¼Œæ¯ä¸ªå¥å­çš„é•¿åº¦ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬ä¼šå–ä¸€ä¸ªé€‚å½“çš„å€¼ï¼Œä½œä¸ºå‘é‡åˆ—è¡¨çš„é•¿åº¦ã€‚å¦‚æžœä¸€ä¸ªå¥å­è¾¾ä¸åˆ°è¿™ä¸ªé•¿åº¦ï¼Œé‚£ä¹ˆå°±å¡«å……å…¨ä¸º0çš„è¯å‘é‡ï¼›å¦‚æžœå¥å­è¶…å‡ºè¿™ä¸ªé•¿åº¦ï¼Œåˆ™åšæˆªæ–­ã€‚å¥å­é•¿åº¦æ˜¯ä¸€ä¸ªè¶…å‚æ•°ï¼Œé€šå¸¸æ˜¯è®­ç»ƒé›†ä¸­çš„å¥å­çš„æœ€å¤§é•¿åº¦ã€‚ ç¼–ç å™¨ (Encoder)æŽ¥æ”¶çš„è¾“å…¥éƒ½æ˜¯ä¸€ä¸ªå‘é‡åˆ—è¡¨ï¼Œè¾“å‡ºä¹Ÿæ˜¯å¤§å°åŒæ ·çš„å‘é‡åˆ—è¡¨ï¼Œç„¶åŽæŽ¥ç€è¾“å…¥ä¸‹ä¸€ä¸ªç¼–ç å™¨ã€‚ ç¬¬ä¸€ä¸ªç¼–ç å™¨çš„è¾“å…¥æ˜¯è¯å‘é‡ï¼Œè€ŒåŽé¢çš„ç¼–ç å™¨çš„è¾“å…¥æ˜¯ä¸Šä¸€ä¸ªç¼–ç å™¨çš„è¾“å‡ºã€‚ è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°Transformerçš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼šæ¯ä¸ªä½ç½®çš„è¯å‘é‡ç»è¿‡ç¼–ç å™¨éƒ½æœ‰è‡ªå·±å•ç‹¬çš„è·¯å¾„ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨Self Attentionå±‚ä¸­ï¼Œè¿™äº›è·¯å¾„ä¹‹é—´æ˜¯æœ‰ä¾èµ–å…³ç³»çš„ï¼›è€Œåœ¨Feed Forward (å‰é¦ˆç¥žç»ç½‘ç»œ)å±‚ä¸­ï¼Œè¿™äº›è·¯å¾„ä¹‹é—´æ˜¯æ²¡æœ‰ä¾èµ–å…³ç³»çš„ã€‚å› æ­¤è¿™äº›è¯å‘é‡åœ¨ç»è¿‡Feed Forwardå±‚ä¸­å¯ä»¥å¹¶è¡Œè®¡ç®—ã€‚ 3.2 Encoder (ç¼–ç å™¨) ä¸Šé¢æˆ‘ä»¬æåˆ°ï¼Œä¸€ä¸ªç¼–ç å™¨æŽ¥æ”¶çš„è¾“å…¥æ˜¯ä¸€ä¸ªå‘é‡åˆ—è¡¨ï¼Œå®ƒä¼šæŠŠå‘é‡åˆ—è¡¨è¾“å…¥åˆ°Self Attentionå±‚ï¼Œç„¶åŽç»è¿‡feed-forward neural network (å‰é¦ˆç¥žç»ç½‘ç»œ)å±‚ï¼Œæœ€åŽå¾—åˆ°è¾“å‡ºï¼Œä¼ å…¥ä¸‹ä¸€ä¸ªç¼–ç å™¨ã€‚ æ¯ä¸ªä½ç½®çš„è¯éƒ½ç»è¿‡Self Attentionå±‚ï¼Œå¾—åˆ°çš„æ¯ä¸ªè¾“å‡ºå‘é‡éƒ½å•ç‹¬ç»è¿‡å‰é¦ˆç¥žç»ç½‘ç»œå±‚ï¼Œæ¯ä¸ªå‘é‡ç»è¿‡çš„å‰é¦ˆç¥žç»ç½‘ç»œéƒ½æ˜¯ä¸€æ ·çš„ã€‚ 4. Self-Attentionæ•´ä½“ç†è§£ ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦ç¿»è¯‘çš„å¥å­æ˜¯ï¼šThe animal didn't cross the street because it was too tired. è¿™ä¸ªå¥å­ä¸­çš„itæ˜¯ä¸€ä¸ªæŒ‡ä»£è¯ï¼Œé‚£ä¹ˆitæŒ‡çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒæ˜¯æŒ‡animalè¿˜æ˜¯streetï¼Ÿè¿™ä¸ªé—®é¢˜å¯¹äººæ¥è¯´ï¼Œæ˜¯å¾ˆç®€å•çš„ï¼Œä½†æ˜¯å¯¹ç®—æ³•æ¥è¯´å¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“ã€‚å½“æ¨¡åž‹åœ¨å¤„ç† (ç¿»è¯‘)itçš„æ—¶å€™ï¼ŒSelf Attentionæœºåˆ¶èƒ½å¤Ÿè®©æ¨¡åž‹æŠŠitå’Œanimalå…³è”èµ·æ¥ã€‚ åŒç†ï¼Œå½“æ¨¡åž‹å¤„ç†å¥å­ä¸­çš„æ¯ä¸ªè¯æ—¶ï¼ŒSelf Attentionæœºåˆ¶ä½¿å¾—æ¨¡åž‹ä¸ä»…èƒ½å¤Ÿå…³æ³¨è¿™ä¸ªä½ç½®çš„è¯ï¼Œè€Œä¸”èƒ½å¤Ÿå…³æ³¨å¥å­ä¸­å…¶ä»–ä½ç½®çš„è¯ï¼Œä½œä¸ºè¾…åŠ©çº¿ç´¢ï¼Œè¿›è€Œå¯ä»¥æ›´å¥½åœ°ç¼–ç å½“å‰ä½ç½®çš„è¯ã€‚ ç›¸åï¼šRNNåœ¨å¤„ç†ä¸€ä¸ªè¯æ—¶ï¼Œä¼šè€ƒè™‘å‰é¢ä¼ è¿‡æ¥çš„hidden stateï¼Œè€Œhidden stateå°±åŒ…å«äº†å‰é¢çš„è¯çš„ä¿¡æ¯ã€‚è€ŒTransformerä½¿ç”¨Self Attentionæœºåˆ¶ï¼Œä¼šæŠŠå…¶ä»–å•è¯çš„ç†è§£èžå…¥å¤„ç†å½“å‰çš„å•è¯ã€‚å¦‚ä¸‹å›¾ï¼š 5. Self-Attentionçš„ç»†èŠ‚ 5.1 è®¡ç®—Queryå‘é‡ã€Keyå‘é‡ã€Valueå‘é‡ ä¸‹é¢æˆ‘ä»¬å…ˆçœ‹ä¸‹å¦‚ä½•ä½¿ç”¨å‘é‡æ¥è®¡ç®—Self Attentionï¼Œç„¶åŽå†çœ‹ä¸‹å¦‚ä½•ä½¿ç”¨çŸ©é˜µæ¥å®žçŽ°Self Attention (çŸ©é˜µè¿ç®—çš„æ–¹å¼ï¼Œä½¿å¾—Self Attentionçš„è®¡ç®—èƒ½å¤Ÿå¹¶è¡ŒåŒ–ï¼Œè¿™ä¹Ÿæ˜¯Self Attentionæœ€ç»ˆçš„å®žçŽ°æ–¹å¼)ã€‚ è®¡ç®—Self Attentionçš„ç¬¬1æ­¥æ˜¯ï¼šå¯¹è¾“å…¥ç¼–ç å™¨çš„æ¯ä¸ªè¯å‘é‡ï¼Œéƒ½åˆ›å»º3ä¸ªå‘é‡ï¼Œåˆ†åˆ«æ˜¯ï¼šQueryå‘é‡ï¼ŒKeyå‘é‡ï¼ŒValueå‘é‡ã€‚è¿™3ä¸ªå‘é‡æ˜¯è¯å‘é‡åˆ†åˆ«å’Œ3ä¸ªçŸ©é˜µç›¸ä¹˜å¾—åˆ°çš„ï¼Œè€Œè¿™ä¸ªçŸ©é˜µæ˜¯æˆ‘ä»¬è¦å­¦ä¹ çš„å‚æ•°ã€‚ æ³¨æ„ï¼Œè¿™3ä¸ªæ–°å¾—åˆ°çš„å‘é‡ä¸€èˆ¬æ¯”åŽŸæ¥çš„è¯å‘é‡çš„é•¿åº¦æ›´å°ã€‚ 5.2 è®¡ç®—Attention Score (æ³¨æ„åŠ›åˆ†æ•°) ç¬¬2æ­¥ï¼Œæ˜¯è®¡ç®—Attention Score (æ³¨æ„åŠ›åˆ†æ•°)ã€‚å‡è®¾æˆ‘ä»¬çŽ°åœ¨è®¡ç®—ç¬¬ä¸€ä¸ªè¯Thinkingçš„Attention Score (æ³¨æ„åŠ›åˆ†æ•°)ï¼Œéœ€è¦æ ¹æ®Thinkingè¿™ä¸ªè¯ï¼Œå¯¹å¥å­ä¸­çš„å…¶ä»–æ¯ä¸ªè¯éƒ½è®¡ç®—ä¸€ä¸ªåˆ†æ•°ã€‚è¿™äº›åˆ†æ•°å†³å®šäº†æˆ‘ä»¬åœ¨ç¼–ç Thinkingè¿™ä¸ªè¯æ—¶ï¼Œéœ€è¦å¯¹å¥å­ä¸­å…¶ä»–ä½ç½®çš„æ¯ä¸ªè¯æ”¾ç½®å¤šå°‘çš„æ³¨æ„åŠ›ã€‚ è¿™äº›åˆ†æ•°ï¼Œæ˜¯é€šè¿‡è®¡ç®—Thinkingå¯¹åº”çš„Queryå‘é‡å’Œå…¶ä»–ä½ç½®çš„æ¯ä¸ªè¯çš„Keyå‘é‡çš„ç‚¹ç§¯è€Œå¾—åˆ°çš„ã€‚å¦‚æžœæˆ‘ä»¬è®¡ç®—å¥å­ä¸­ç¬¬ä¸€ä¸ªä½ç½®å•è¯çš„Attention Score (æ³¨æ„åŠ›åˆ†æ•°)ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªåˆ†æ•°å°±æ˜¯q1å’Œk1çš„å†…ç§¯ï¼Œç¬¬äºŒä¸ªåˆ†æ•°å°±æ˜¯q1å’Œk2çš„ç‚¹ç§¯ã€‚ ç¬¬3æ­¥å°±æ˜¯æŠŠæ¯ä¸ªåˆ†æ•°é™¤ä»¥æŸä¸ªæ•°ï¼Œè¿™æ˜¯ä¸ºäº†åœ¨åå‘ä¼ æ’­æ—¶ï¼Œæ±‚å–æ¢¯åº¦æ›´åŠ ç¨³å®šã€‚ ç¬¬4æ­¥ï¼ŒæŽ¥ç€æŠŠè¿™äº›åˆ†æ•°ç»è¿‡ä¸€ä¸ªSoftmaxå±‚ï¼ŒSoftmaxå¯ä»¥å°†åˆ†æ•°å½’ä¸€åŒ–ï¼Œè¿™æ ·ä½¿å¾—åˆ†æ•°éƒ½æ˜¯æ­£æ•°å¹¶ä¸”åŠ èµ·æ¥ç­‰äºŽ1ã€‚ è¿™äº›åˆ†æ•°å†³å®šäº†åœ¨ç¼–ç å½“å‰ä½ç½®çš„è¯æ—¶ï¼Œå¯¹æ‰€æœ‰ä½ç½®çš„è¯åˆ†åˆ«æœ‰å¤šå°‘çš„æ³¨æ„åŠ›ã€‚å¾ˆæ˜Žæ˜¾ï¼Œåœ¨ä¸Šå›¾çš„ä¾‹å­ä¸­ï¼Œå½“å‰ä½ç½®çš„è¯ä¼šæœ‰æœ€é«˜çš„åˆ†æ•°ï¼Œä½†æœ‰æ—¶ï¼Œå…³æ³¨åˆ°å…¶ä»–ä½ç½®ä¸Šç›¸å…³çš„è¯ä¹Ÿå¾ˆæœ‰ç”¨ã€‚ ç¬¬5æ­¥ï¼Œå¾—åˆ°æ¯ä¸ªä½ç½®çš„åˆ†æ•°åŽï¼Œå°†æ¯ä¸ªåˆ†æ•°åˆ†åˆ«ä¸Žæ¯ä¸ªValueå‘é‡ç›¸ä¹˜ã€‚è¿™ç§åšæ³•èƒŒåŽçš„ç›´è§‰ç†è§£å°±æ˜¯ï¼šå¯¹äºŽåˆ†æ•°é«˜çš„ä½ç½®ï¼Œç›¸ä¹˜åŽçš„å€¼å°±è¶Šå¤§ï¼Œæˆ‘ä»¬æŠŠæ›´å¤šçš„æ³¨æ„åŠ›æ”¾åˆ°äº†å®ƒä»¬èº«ä¸Šï¼›å¯¹äºŽåˆ†æ•°ä½Žçš„ä½ç½®ï¼Œç›¸ä¹˜åŽçš„å€¼å°±è¶Šå°ï¼Œè¿™äº›ä½ç½®çš„è¯å¯èƒ½æ˜¯ç›¸å…³æ€§ä¸å¤§çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¿½ç•¥äº†è¿™äº›ä½ç½®çš„è¯ã€‚ ç¬¬6æ­¥æ˜¯æŠŠä¸Šä¸€æ­¥å¾—åˆ°çš„å‘é‡ç›¸åŠ ï¼Œå°±å¾—åˆ°äº†Self Attentionå±‚åœ¨è¿™ä¸ªä½ç½®çš„è¾“å‡ºã€‚ ä¸Šé¢è¿™å¼ å›¾ï¼ŒåŒ…å«äº†Self Attentionçš„å…¨è¿‡ç¨‹ï¼Œæœ€ç»ˆå¾—åˆ°çš„å½“å‰ä½ç½®çš„å‘é‡ä¼šè¾“å…¥åˆ°å‰é¦ˆç¥žç»ç½‘ç»œã€‚ä½†è¿™æ ·æ¯æ¬¡åªèƒ½è®¡ç®—ä¸€ä¸ªä½ç½®çš„è¾“å‡ºå‘é‡ï¼Œåœ¨å®žé™…çš„ä»£ç å®žçŽ°ä¸­ï¼ŒSelf Attention çš„è®¡ç®—è¿‡ç¨‹æ˜¯ä½¿ç”¨çŸ©é˜µæ¥å®žçŽ°çš„ï¼Œè¿™æ ·å¯ä»¥åŠ é€Ÿè®¡ç®—ï¼Œä¸€æ¬¡å°±å¾—åˆ°æ‰€æœ‰ä½ç½®çš„è¾“å‡ºå‘é‡ã€‚ 6. ä½¿ç”¨çŸ©é˜µè®¡ç®—Self-Attention ç¬¬ä¸€æ­¥æ˜¯è®¡ç®—Queryï¼ŒKeyï¼ŒValueçš„çŸ©é˜µã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æŠŠæ‰€æœ‰è¯å‘é‡æ”¾åˆ°ä¸€ä¸ªçŸ©é˜µXä¸­ï¼Œç„¶åŽåˆ†åˆ«å’Œ3ä¸ªæƒé‡çŸ©é˜µç›¸ä¹˜ï¼Œå¾—åˆ°Qï¼ŒKï¼ŒVçŸ©é˜µã€‚ æŽ¥ç€ï¼Œç”±äºŽæˆ‘ä»¬ä½¿ç”¨äº†çŸ©é˜µæ¥è®¡ç®—ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢çš„ç¬¬2æ­¥åˆ°ç¬¬6æ­¥åŽ‹ç¼©ä¸ºä¸€æ­¥ï¼Œç›´æŽ¥å¾—åˆ°Self Attentionçš„è¾“å‡ºã€‚ 7. å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ Transformerçš„è®ºæ–‡é€šè¿‡å¢žåŠ å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ (ä¸€ç»„æ³¨æ„åŠ›ç§°ä¸ºä¸€ä¸ªattention head)ï¼Œè¿›ä¸€æ­¥å®Œå–„äº†Self Attentionå±‚ã€‚è¿™ç§æœºåˆ¶ä»Žå¦‚ä¸‹ä¸¤ä¸ªæ–¹é¢å¢žå¼ºäº†attentionå±‚çš„èƒ½åŠ›ï¼š å®ƒæ‰©å±•äº†æ¨¡åž‹å…³æ³¨ä¸åŒä½ç½®çš„èƒ½åŠ›ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç¬¬ä¸€ä¸ªä½ç½®çš„è¾“å‡ºz1åŒ…å«äº†å¥å­ä¸­å…¶ä»–æ¯ä¸ªä½ç½®çš„å¾ˆå°ä¸€éƒ¨åˆ†ä¿¡æ¯ï¼Œä½†z1å¯èƒ½ä¸»è¦æ˜¯ç”±ç¬¬ä¸€ä¸ªä½ç½®çš„ä¿¡æ¯å†³å®šçš„ã€‚å½“æˆ‘ä»¬ç¿»è¯‘å¥å­ï¼šThe animal didn't cross the street because it was too tiredæ—¶ï¼Œæˆ‘ä»¬æƒ³è®©æœºå™¨çŸ¥é“å…¶ä¸­çš„itæŒ‡ä»£çš„æ˜¯ä»€ä¹ˆã€‚è¿™æ—¶ï¼Œå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ä¼šæœ‰å¸®åŠ©ã€‚ å¤šå¤´æ³¨æ„åŠ›æœºåˆ¶èµ‹äºˆattentionå±‚å¤šä¸ª\"å­è¡¨ç¤ºç©ºé—´\"ã€‚ä¸‹é¢æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œå¤šå¤´æ³¨æ„åŠ›æœºåˆ¶ä¼šæœ‰å¤šç»„çš„æƒé‡çŸ©é˜µ (åœ¨Transformerçš„è®ºæ–‡ä¸­ï¼Œä½¿ç”¨äº†8ç»„æ³¨æ„åŠ› (attention heads))ã€‚æ¯ä¸€ç»„æ³¨æ„åŠ›çš„çš„æƒé‡çŸ©é˜µéƒ½æ˜¯éšæœºåˆå§‹åŒ–çš„ã€‚ç»è¿‡è®­ç»ƒä¹‹åŽï¼Œæ¯ä¸€ç»„æ³¨æ„åŠ›å¯ä»¥çœ‹ä½œæ˜¯æŠŠè¾“å…¥çš„å‘é‡æ˜ å°„åˆ°ä¸€ä¸ª\"å­è¡¨ç¤ºç©ºé—´\"ã€‚ æŽ¥ç€ï¼Œæˆ‘ä»¬æŠŠæ¯ç»„Kã€Qã€Vè®¡ç®—å¾—åˆ°æ¯ç»„çš„ZçŸ©é˜µï¼Œå°±å¾—åˆ°8ä¸ªZçŸ©é˜µã€‚ æŽ¥ä¸‹æ¥å°±æœ‰ç‚¹éº»çƒ¦äº†ï¼Œå› ä¸ºå‰é¦ˆç¥žç»ç½‘ç»œå±‚æŽ¥æ”¶çš„æ˜¯1ä¸ªçŸ©é˜µ (å…¶ä¸­æ¯è¡Œçš„å‘é‡è¡¨ç¤ºä¸€ä¸ªè¯)ï¼Œè€Œä¸æ˜¯8ä¸ªçŸ©é˜µã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ï¼ŒæŠŠ8ä¸ªçŸ©é˜µæ•´åˆä¸ºä¸€ä¸ªçŸ©é˜µã€‚ æ€Žä¹ˆæ‰èƒ½åšåˆ°å‘¢ï¼Ÿæˆ‘ä»¬æŠŠçŸ©é˜µæ‹¼æŽ¥èµ·æ¥ï¼Œç„¶åŽå’Œå¦ä¸€ä¸ªæƒé‡çŸ©é˜µç›¸ä¹˜ã€‚ 8. ä½¿ç”¨ä½ç½®ç¼–ç æ¥è¡¨ç¤ºåºåˆ—çš„é¡ºåº åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬é˜è¿°çš„æ¨¡åž‹ä¸­ç¼ºå¤±äº†ä¸€ä¸ªä¸œè¥¿ï¼Œé‚£å°±æ˜¯è¡¨ç¤ºåºåˆ—ä¸­å•è¯é¡ºåºçš„æ–¹æ³•ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTransformeræ¨¡åž‹å¯¹æ¯ä¸ªè¾“å…¥çš„å‘é‡éƒ½æ·»åŠ äº†ä¸€ä¸ªå‘é‡ã€‚è¿™äº›å‘é‡éµå¾ªæ¨¡åž‹å­¦ä¹ åˆ°çš„ç‰¹å®šæ¨¡å¼ï¼Œæœ‰åŠ©äºŽç¡®å®šæ¯ä¸ªå•è¯çš„ä½ç½®ï¼Œæˆ–è€…å¥å­ä¸­ä¸åŒå•è¯ä¹‹é—´çš„è·ç¦»ã€‚è¿™ç§åšæ³•èƒŒåŽçš„ç›´è§‰æ˜¯ï¼šå°†è¿™äº›è¡¨ç¤ºä½ç½®çš„å‘é‡æ·»åŠ åˆ°è¯å‘é‡ä¸­ï¼Œå¾—åˆ°äº†æ–°çš„å‘é‡ï¼Œè¿™äº›æ–°å‘é‡æ˜ å°„åˆ°Q/K/Vï¼Œç„¶åŽè®¡ç®—ç‚¹ç§¯å¾—åˆ°attentionæ—¶ï¼Œå¯ä»¥æä¾›æœ‰æ„ä¹‰çš„ä¿¡æ¯ã€‚ 9. æ®‹å·®è¿žæŽ¥ ç¼–ç å™¨ç»“æž„ä¸­æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç»†èŠ‚æ˜¯ï¼šç¼–ç å™¨çš„æ¯ä¸ªå­å±‚ (Self Attentionå±‚å’ŒFFNN)éƒ½æœ‰ä¸€ä¸ªæ®‹å·®è¿žæŽ¥å’Œå±‚æ ‡å‡†åŒ– (layer-normalization)ã€‚ åœ¨è§£ç å™¨çš„å­å±‚é‡Œé¢ä¹Ÿæœ‰å±‚æ ‡å‡†åŒ– (layer-normalization)ã€‚ 10. Decoder (è§£ç å™¨) ç¼–ç å™¨ä¸€èˆ¬æœ‰å¤šå±‚ï¼Œç¬¬ä¸€ä¸ªç¼–ç å™¨çš„è¾“å…¥æ˜¯ä¸€ä¸ªåºåˆ—ï¼Œæœ€åŽä¸€ä¸ªç¼–ç å™¨è¾“å‡ºæ˜¯ä¸€ç»„æ³¨æ„åŠ›å‘é‡Kå’ŒVã€‚è¿™äº›æ³¨æ„åŠ›å‘é‡å°†ä¼šè¾“å…¥åˆ°æ¯ä¸ªè§£ç å™¨çš„Encoder-Decoder Attentionå±‚ï¼Œè¿™æœ‰åŠ©äºŽè§£ç å™¨æŠŠæ³¨æ„åŠ›é›†ä¸­è¾“å…¥åºåˆ—çš„åˆé€‚ä½ç½®ã€‚ åœ¨å®Œæˆäº†ç¼–ç  (encoding)é˜¶æ®µä¹‹åŽï¼Œæˆ‘ä»¬å¼€å§‹è§£ç  (decoding)é˜¶æ®µã€‚è§£ç  (decoding)é˜¶æ®µçš„æ¯ä¸€ä¸ªæ—¶é—´æ­¥éƒ½è¾“å‡ºä¸€ä¸ªç¿»è¯‘åŽçš„å•è¯ã€‚ æŽ¥ä¸‹æ¥ä¼šé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°è¾“å‡ºä¸€ä¸ªç»“æŸç¬¦ï¼ŒTransformerå°±å®Œæˆäº†æ‰€æœ‰çš„è¾“å‡ºã€‚æ¯ä¸€æ­¥çš„è¾“å‡ºéƒ½ä¼šåœ¨ä¸‹ä¸€ä¸ªæ—¶é—´æ­¥è¾“å…¥åˆ°ä¸‹é¢çš„ç¬¬ä¸€ä¸ªè§£ç å™¨ã€‚Decoderå°±åƒEncoderé‚£æ ·ï¼Œä»Žä¸‹å¾€ä¸Šä¸€å±‚ä¸€å±‚åœ°è¾“å‡ºç»“æžœã€‚æ­£å¯¹å¦‚ç¼–ç å™¨çš„è¾“å…¥æ‰€åšçš„å¤„ç†ï¼Œæˆ‘ä»¬æŠŠè§£ç å™¨çš„è¾“å…¥å‘é‡ï¼Œä¹ŸåŠ ä¸Šä½ç½®ç¼–ç å‘é‡ï¼Œæ¥æŒ‡ç¤ºæ¯ä¸ªè¯çš„ä½ç½®ã€‚ è§£ç å™¨ä¸­çš„Self Attentionå±‚ï¼Œå’Œç¼–ç å™¨ä¸­çš„Self Attentionå±‚ä¸å¤ªä¸€æ ·ï¼šåœ¨è§£ç å™¨é‡Œï¼ŒSelf Attentionå±‚åªå…è®¸å…³æ³¨åˆ°è¾“å‡ºåºåˆ—ä¸­æ—©äºŽå½“å‰ä½ç½®ä¹‹å‰çš„å•è¯ã€‚å…·ä½“åšæ³•æ˜¯ï¼šåœ¨Self Attentionåˆ†æ•°ç»è¿‡Softmaxå±‚ä¹‹å‰ï¼Œå±è”½å½“å‰ä½ç½®ä¹‹åŽçš„é‚£äº›ä½ç½®ã€‚ Decoder Attentionå±‚çš„åŽŸç†å’Œå¤šå¤´æ³¨æ„åŠ› (MultiHeaded Self Attention)æœºåˆ¶ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„æ˜¯ï¼šDecoder Attentionå±‚æ˜¯ä½¿ç”¨å‰ä¸€å±‚çš„è¾“å‡ºæ¥æž„é€ QueryçŸ©é˜µï¼Œè€ŒKeyçŸ©é˜µå’ŒValueçŸ©é˜µæ¥è‡ªäºŽç¼–ç å™¨ (Encoder)æœ€ç»ˆçš„è¾“å‡ºã€‚ 11. æœ€åŽçš„çº¿æ€§å±‚å’ŒSoftmaxå±‚ Decoderæœ€ç»ˆçš„è¾“å‡ºæ˜¯ä¸€ä¸ªå‘é‡ï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ æ˜¯æµ®ç‚¹æ•°ã€‚æˆ‘ä»¬æ€Žä¹ˆæŠŠè¿™ä¸ªå‘é‡è½¬æ¢ä¸ºå•è¯å‘¢ï¼Ÿè¿™æ˜¯ç”±Softmaxå±‚åŽé¢çš„çº¿æ€§å±‚æ¥å®Œæˆçš„ã€‚ çº¿æ€§å±‚å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å…¨è¿žæŽ¥ç¥žç»ç½‘ç»œï¼Œå¯ä»¥æŠŠè§£ç å™¨è¾“å‡ºçš„å‘é‡ï¼Œæ˜ å°„åˆ°ä¸€ä¸ªæ›´é•¿çš„å‘é‡ï¼Œè¿™ä¸ªå‘é‡ç§°ä¸ºlogitså‘é‡ã€‚çŽ°åœ¨å‡è®¾æˆ‘ä»¬çš„æ¨¡åž‹æœ‰10000ä¸ªè‹±è¯­å•è¯ (æ¨¡åž‹çš„è¾“å‡ºè¯æ±‡è¡¨)ï¼Œè¿™äº›å•è¯æ˜¯ä»Žè®­ç»ƒé›†ä¸­å­¦åˆ°çš„ã€‚å› æ­¤logitså‘é‡æœ‰ 10000 ä¸ªæ•°å­—ï¼Œæ¯ä¸ªæ•°è¡¨ç¤ºä¸€ä¸ªå•è¯çš„åˆ†æ•°ã€‚æˆ‘ä»¬å°±æ˜¯è¿™æ ·åŽ»ç†è§£çº¿æ€§å±‚çš„è¾“å‡ºã€‚ ç„¶åŽï¼ŒSoftmaxå±‚ä¼šæŠŠè¿™äº›åˆ†æ•°è½¬æ¢ä¸ºæ¦‚çŽ‡ (æŠŠæ‰€æœ‰çš„åˆ†æ•°è½¬æ¢ä¸ºæ­£æ•°ï¼Œå¹¶ä¸”åŠ èµ·æ¥ç­‰äºŽ1)ã€‚ç„¶åŽé€‰æ‹©æœ€é«˜æ¦‚çŽ‡çš„é‚£ä¸ªæ•°å­—å¯¹åº”çš„è¯ï¼Œå°±æ˜¯è¿™ä¸ªæ—¶é—´æ­¥çš„è¾“å‡ºå•è¯ã€‚ "},"Lover/":{"url":"Lover/","title":"My Lover","keywords":"","body":" æˆ‘æ„¿æ„åœ¨æœ‰é™çš„æ—¶é—´é‡Œæ— é™çš„çˆ±ç€ä½ ã€‚ /* å¤´åƒå¤§å°è°ƒæ•´ */ .avatar { width: 80px; /* å¤´åƒå®½åº¦ */ height: 80px; /* å¤´åƒé«˜åº¦ */ vertical-align: -20px; border-radius: 50%; margin-right: 5px; margin-bottom: 5px; -webkit-box-shadow: 1px 1px 1px rgba(0,0,0,.1), 1px 1px 1px rgba(0,0,0,0.1), 1px 1px 1px rgba(0,0,0,0.1); box-shadow: 1px 1px 1px rgba(0,0,0,.1), 1px 1px 1px rgba(0,0,0,0.1), 1px 1px 1px rgba(0,0,0,0.1); border: 2px solid #fff; } function timing() { // å¼€å§‹æ—¶é—´ - æ ¼å¼: å¹´-æœˆ-æ—¥ æ—¶:åˆ†:ç§’ let start = '2021-9-3 00:00:00' let startTime = new Date(start).getTime() let currentTime = new Date().getTime() let difference = currentTime - startTime let m = Math.floor(difference / (1000)) let mm = m % 60 // ç§’ let f = Math.floor(m / 60) let ff = f % 60 // åˆ†é’Ÿ let s = Math.floor(f / 60) // å°æ—¶ let ss = s % 24 let day = Math.floor(s / 24 ) // å¤©æ•° return \" \" + day + \" day \" + ss + \" h \" + ff + \" m \" + mm +' s' } setInterval(()=>{ document.getElementById('Timing').innerHTML = timing() }, 1000) --> "},"Friends/":{"url":"Friends/","title":"My Friends","keywords":"","body":"My Friends "}}